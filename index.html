<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<title>Doln√≠ Lhota Run - Kompletn√≠ demo</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root {
    --primary: #2779e2;
    --accent: #ffac33;
    --bg: #f7fafc;
    --sidebar-bg: linear-gradient(180deg, #2779e2 70%, #48c3cb 130%);
    --card-bg: #fff;
    --text: #212529;
    --sidebar-width: 220px;
    --active-bg: #fff;
    --active-color: #2779e2;
    --inactive-color: #8b96ab;
  }
  [data-theme="dark"] {
    --primary: #8ab8fa;
    --accent: #ffa338;
    --bg: #181c24;
    --sidebar-bg: linear-gradient(180deg, #22243c 80%, #2779e2 150%);
    --card-bg: #24283b;
    --text: #f3f7fa;
    --active-bg: #fff;
    --active-color: #2779e2;
    --inactive-color: #607088;
  }
  body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', 'Montserrat', Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    transition: background .2s, color .2s;
  }
  #sidebar {
    position: fixed;
    top: 0; left: 0; bottom: 0;
    width: var(--sidebar-width);
    background: var(--sidebar-bg);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 36px 0 0 0;
    z-index: 10;
    box-shadow: 3px 0 18px rgba(39,121,226,.08);
    transition: background .2s;
    height: 100vh;
  }
  .sidebar-logo {
    font-size: 1.38em;
    font-weight: 700;
    margin: 0 0 32px 34px;
    letter-spacing: 1px;
    color: #fff;
    text-shadow: 0 2px 10px #2779e245;
  }
  .sidebar-btn {
    width: 90%;
    margin: 7px 0 0 0;
    padding: 14px 32px;
    border: none;
    background: none;
    color: var(--inactive-color);
    border-radius: 16px;
    font-size: 1.14em;
    font-family: inherit;
    text-align: left;
    cursor: pointer;
    font-weight: 500;
    transition: background .13s, color .12s;
    display: flex;
    align-items: center;
    gap: 9px;
    box-shadow: none;
    outline: none;
  }
  .sidebar-btn svg {
    flex-shrink: 0;
    stroke: var(--inactive-color);
    background: none;
    transition: stroke .15s;
  }
  .sidebar-btn.active {
    background: var(--active-bg);
    color: var(--active-color);
    font-weight: bold;
    box-shadow: 0 2px 12px #2779e215;
  }
  .sidebar-btn.active svg {
    stroke: var(--active-color) !important;
  }
  .sidebar-btn:not(.active):hover {
    background: #fff3;
    color: var(--primary);
  }
  .sidebar-btn:not(.active):hover svg {
    stroke: var(--primary) !important;
  }
  .theme-switch {
    margin: 42px 0 0 34px;
    cursor: pointer;
    background: #fff2;
    color: #fff;
    padding: 10px 24px;
    border-radius: 20px;
    font-size: 1.08em;
    transition: background .15s, color .13s;
    border: none;
    display: block;
  }
  .theme-switch:hover { background: #fff3; color: var(--accent);}
  main {
    margin-left: var(--sidebar-width);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    justify-content: flex-start;
    padding: 40px 20px;
  }
  .card {
    margin-top: 60px;
    background: var(--card-bg);
    border-radius: 17px;
    box-shadow: 0 8px 36px #2779e215;
    padding: 38px 28px;
    max-width: 700px;
    width: 100%;
    font-size: 1.18em;
    color: var(--text);
    text-align: center;
    display: none;
  }
  .card.active { display: block; }
</style>
</head>
<body data-theme="light">
  <div id="sidebar">
    <div class="sidebar-logo">üèÉ Doln√≠ Lhota Run</div>
    <button class="sidebar-btn active" id="menu-dashboard" onclick="showSection('dashboard')">
      <svg width="22" height="22" fill="none" stroke="#2779e2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <rect x="3" y="12" width="7" height="9"/><rect x="14" y="3" width="7" height="18"/>
      </svg>
      Dashboard
    </button>
    <button class="sidebar-btn" id="menu-my" onclick="showSection('myruns')">
      <svg width="22" height="22" fill="none" stroke="#8b96ab" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <path d="M16 21v-2a4 4 0 0 0-8 0v2"/><circle cx="12" cy="7" r="4"/>
      </svg>
      Moje bƒõhy
    </button>
    <button class="sidebar-btn" id="menu-team" onclick="showSection('team')">
      <svg width="22" height="22" fill="none" stroke="#8b96ab" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <path d="M17 21v-2a4 4 0 0 0-3-3.87"/><path d="M7 21v-2a4 4 0 0 1 3-3.87"/><circle cx="12" cy="7" r="4"/>
      </svg>
      T√Ωm
    </button>
    <button class="sidebar-btn" id="menu-allrunners" onclick="showSection('allrunners')">
      <svg width="22" height="22" fill="none" stroke="#8b96ab" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
      </svg>
      V≈°ichni bƒõ≈æci
    </button>
    <button class="sidebar-btn" id="logoutBtn" onclick="logout()">
      <svg width="22" height="22" fill="none" stroke="#8b96ab" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/>
      </svg>
      Odhl√°sit
    </button>
    <button class="theme-switch" onclick="switchTheme()" id="themeToggleBtn">üåô Tmav√Ω re≈æim</button>
  </div>
  <main>
    <div class="card active" id="section-dashboard">
      <h2>V√≠tej v bƒõ≈æeck√© v√Ωzvƒõ Doln√≠ Lhoty!</h2>
      <p>Tady bude≈° zad√°vat sv√© bƒõhy, sledovat po≈ôad√≠, t√Ωm a statistiky.</p>
    </div>
    <div class="card" id="section-myruns">
      <h2>Zadat nov√Ω bƒõh</h2>
      <label for="input-km">Kolik km?</label>
      <input type="number" id="input-km" min="0" step="0.01" placeholder="nap≈ô. 5.3" oninput="updatePace()" />
      <label for="input-min">ƒåas v minut√°ch</label>
      <input type="number" id="input-min" min="1" step="1" placeholder="nap≈ô. 30" oninput="updatePace()" />
      <label for="input-pace">Pr≈Ømƒõrn√© tempo (min/km)</label>
      <input type="text" id="input-pace" disabled placeholder="0.00" />
      <button class="primary-btn" onclick="addRun()">P≈ôidat bƒõh</button>
      <h3>Seznam bƒõh≈Ø</h3>
      <ul id="myRunsList" class="run-list"></ul>
    </div>

    <div class="card" id="section-team">
      <h2>T√Ωm</h2>
      <label for="select-team">Vyber t√Ωm</label>
      <select id="select-team"></select>
      <button class="primary-btn" onclick="joinTeam()">P≈ôidat se do t√Ωmu</button>
      <h3>ƒålenov√© t√Ωmu</h3>
      <ul id="teamMembersList" class="run-list"></ul>
      <label for="input-new-team">Vytvo≈ôit nov√Ω t√Ωm</label>
      <input type="text" id="input-new-team" placeholder="N√°zev nov√©ho t√Ωmu" />
      <button class="primary-btn" onclick="createTeam()">Vytvo≈ôit t√Ωm</button>
    </div>

    <div class="card" id="section-allrunners">
      <h2>Tabulka bƒõ≈æc≈Ø</h2>
      <table>
        <thead>
          <tr>
            <th>#</th><th>Jm√©no</th><th>Celkem km</th><th>Celkem min</th><th>Pr≈Ømƒõrn√© tempo</th>
          </tr>
        </thead>
        <tbody id="runnersTableBody"></tbody>
      </table>
    </div>
  </main>
  <script>
    let runs = [];
    let runners = {
      'Alena': { km: 15, min: 90 },
      'Karel': { km: 20, min: 100 }
    };
    let teams = {
      'Brouci': ['Alena'],
      'Lesn√≠ bƒõ≈æci': ['Karel']
    };
    let currentTeam = null;

    function showSection(id) {
      document.querySelectorAll('.card').forEach(e => e.classList.remove('active'));
      document.querySelectorAll('.sidebar-btn').forEach(e => e.classList.remove('active'));
      document.getElementById('section-' + id).classList.add('active');
      document.getElementById('menu-' + (id === 'myruns' ? 'my' : id)).classList.add('active');

      if (id === 'myruns') renderMyRuns();
      if (id === 'team') {
        renderTeamSelect();
        renderTeamMembers();
      }
      if (id === 'allrunners') renderRunnersTable();
    }

    function switchTheme() {
      const html = document.documentElement;
      const isDark = html.getAttribute('data-theme') === 'dark';
      html.setAttribute('data-theme', isDark ? 'light' : 'dark');
      document.getElementById('themeToggleBtn').textContent = isDark ? 'üåô Tmav√Ω re≈æim' : '‚òÄÔ∏è Svƒõtl√Ω re≈æim';
    }

    function updatePace() {
      const km = parseFloat(document.getElementById('input-km').value);
      const min = parseInt(document.getElementById('input-min').value);
      if (km > 0 && min > 0) {
        document.getElementById('input-pace').value = (min / km).toFixed(2);
      } else {
        document.getElementById('input-pace').value = '';
      }
    }

    function addRun() {
      const km = parseFloat(document.getElementById('input-km').value);
      const min = parseInt(document.getElementById('input-min').value);
      if (!km || !min || km <= 0 || min <= 0) {
        alert('Pros√≠m, zadej platn√© km i minuty.');
        return;
      }
      const pace = min / km;
      runs.push({ km, min, pace });

      renderMyRuns();

      if (!runners['Ty']) {
        runners['Ty'] = { km: 0, min: 0 };
      }
      runners['Ty'].km += km;
      runners['Ty'].min += min;

      renderRunnersTable();

      document.getElementById('input-km').value = '';
      document.getElementById('input-min').value = '';
      document.getElementById('input-pace').value = '';
    }

    function renderMyRuns() {
      const ul = document.getElementById('myRunsList');
      ul.innerHTML = '';
      runs.forEach((run, i) => {
        const li = document.createElement('li');
        li.textContent = `${i + 1}. ${run.km.toFixed(2)} km, ${run.min} min, tempo ${run.pace.toFixed(2)} min/km`;
        ul.appendChild(li);
      });
    }

    function renderTeamSelect() {
      const select = document.getElementById('select-team');
      select.innerHTML = '';
      for (const teamName in teams) {
        const option = document.createElement('option');
        option.value = teamName;
        option.textContent = teamName;
        select.appendChild(option);
      }
    }

    function joinTeam() {
      const select = document.getElementById('select-team');
      const chosenTeam = select.value;
      if (!chosenTeam) return alert('Vyber t√Ωm.');

      for (const teamName in teams) {
        const idx = teams[teamName].indexOf('Ty');
        if (idx !== -1 && teamName !== chosenTeam) {
          teams[teamName].splice(idx, 1);
        }
      }

      if (!teams[chosenTeam].includes('Ty')) {
        teams[chosenTeam].push('Ty');
      }

      currentTeam = chosenTeam;
      renderTeamMembers();
      alert(`P≈ôid√°n do t√Ωmu ${chosenTeam}`);
    }

    function renderTeamMembers() {
      const ul = document.getElementById('teamMembersList');
      ul.innerHTML = '';
      if (!currentTeam || !teams[currentTeam] || teams[currentTeam].length === 0) {
        ul.textContent = 'Nejsi zat√≠m v ≈æ√°dn√©m t√Ωmu.';
        return;
      }
      teams[currentTeam].forEach(member => {
        const li = document.createElement('li');
        li.textContent = member;
        ul.appendChild(li);
      });
    }

    function createTeam() {
      const input = document.getElementById('input-new-team');
      const teamName = input.value.trim();
      if (!teamName) {
        alert('Zadej n√°zev t√Ωmu.');
        return;
      }
      if (teams[teamName]) {
        alert('T√Ωm s t√≠mto n√°zvem u≈æ existuje.');
        return;
      }
      teams[teamName] = [];
      input.value = '';
      alert(`T√Ωm "${teamName}" byl vytvo≈ôen.`);
      renderTeamSelect();
    }

    function renderRunnersTable() {
      const tbody = document.getElementById('runnersTableBody');
      tbody.innerHTML = '';
      const sorted = Object.entries(runners).sort((a,b) => b[1].km - a[1].km);
      sorted.forEach(([name, stats], index) => {
        const tr = document.createElement('tr');
        const pace = (stats.min / stats.km).toFixed(2);
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${name}</td>
          <td>${stats.km.toFixed(2)}</td>
          <td>${stats.min}</td>
          <td>${pace}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function logout() {
      alert('Odhl√°≈°en (demo).');
      // Zde by se p≈ôidalo odhl√°≈°en√≠ Firebase nebo jin√© logiky
    }

    // Na zaƒç√°tku zobraz dashboard
    showSection('dashboard');
  </script>
</body>
</html>
