<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Doln√≠ Lhota Run</title>
<style>
  :root {
    --color-light-bg: #f0f4ff;
    --color-light-text: #222;
    --color-light-primary: #2e5dbd;
    --color-light-primary-light: #5786ff;

    --color-dark-bg: #121417;
    --color-dark-text: #eee;
    --color-dark-primary: #5786ff;
    --color-dark-primary-light: #7da9ff;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    background: var(--color-light-bg);
    color: var(--color-light-text);
    transition: background 0.3s, color 0.3s;
  }

  body.dark {
    background: var(--color-dark-bg);
    color: var(--color-dark-text);
  }

  header {
    background: linear-gradient(90deg, var(--color-light-primary), var(--color-light-primary-light));
    color: white; padding: 10px 20px;
    display: flex; align-items: center; justify-content: space-between;
    transition: background 0.3s;
  }

  body.dark header {
    background: linear-gradient(90deg, var(--color-dark-primary), var(--color-dark-primary-light));
  }

  header h1 {
    margin: 0; font-size: 1.5rem;
    display: flex; align-items: center; gap: 8px;
  }

  nav {
    background: white;
    display: flex; justify-content: center; gap: 10px;
    padding: 10px 0;
    box-shadow: 0 2px 5px rgb(0 0 0 / 0.1);
    transition: background 0.3s;
  }

  body.dark nav {
    background: #20232a;
    box-shadow: 0 2px 5px rgb(255 255 255 / 0.1);
  }

  nav button {
    background: var(--color-light-primary-light);
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s;
  }

  nav button:hover, nav button.active {
    background: var(--color-light-primary);
  }

  body.dark nav button {
    background: var(--color-dark-primary-light);
    color: var(--color-dark-text);
  }

  body.dark nav button:hover, body.dark nav button.active {
    background: var(--color-dark-primary);
  }

  main {
    max-width: 900px;
    margin: 20px auto;
    padding: 0 20px;
  }

  section {
    display: none;
  }

  section.active {
    display: block;
  }

  h2 {
    color: var(--color-light-primary);
    transition: color 0.3s;
  }

  body.dark h2 {
    color: var(--color-dark-primary);
  }

  label {
    display: block;
    margin-top: 15px;
    font-weight: 600;
  }

  input[type=number], input[type=text], input[type=password] {
    width: 100%; max-width: 150px;
    padding: 8px;
    margin-top: 5px;
    border: 1px solid #bbb;
    border-radius: 4px;
    font-size: 1rem;
    background: white;
    color: black;
    transition: background 0.3s, color 0.3s;
  }

  body.dark input[type=number], body.dark input[type=text], body.dark input[type=password] {
    background: #2a2c33;
    color: var(--color-dark-text);
    border-color: #555;
  }

  #btnAddRun, #btnLogin, #btnLogout, #btnJoinTeam, #btnCreateTeam {
    margin-top: 20px;
    background: var(--color-light-primary);
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.3s;
  }

  #btnAddRun:hover, #btnLogin:hover, #btnLogout:hover, #btnJoinTeam:hover, #btnCreateTeam:hover {
    background: var(--color-light-primary-light);
  }

  body.dark #btnAddRun, body.dark #btnLogin, body.dark #btnLogout, body.dark #btnJoinTeam, body.dark #btnCreateTeam {
    background: var(--color-dark-primary);
    color: var(--color-dark-text);
  }

  body.dark #btnAddRun:hover, body.dark #btnLogin:hover, body.dark #btnLogout:hover, body.dark #btnJoinTeam:hover, body.dark #btnCreateTeam:hover {
    background: var(--color-dark-primary-light);
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-size: 0.95rem;
  }

  table, th, td {
    border: 1px solid #aaa;
    transition: border-color 0.3s;
  }

  body.dark table, body.dark th, body.dark td {
    border-color: #555;
  }

  th, td {
    padding: 8px;
    text-align: left;
  }

  th {
    background: #d0dcff;
    transition: background 0.3s;
  }

  body.dark th {
    background: #3b44b1;
  }

  .center {
    text-align: center;
  }

  #darkModeToggle {
    background: transparent;
    border: none;
    color: white;
    cursor: pointer;
    font-size: 1.1rem;
  }
</style>
</head>
<body>
<header>
  <h1>üèÉ Doln√≠ Lhota Run</h1>
  <button id="darkModeToggle" title="P≈ôepnout tmav√Ω re≈æim">üåô</button>
  <button id="logoutBtn" style="background:#ff4c4c; border:none; border-radius:5px; color:white; cursor:pointer; display:none;">Odhl√°sit</button>
</header>

<nav>
  <button id="btnDashboard" class="active">Hlavn√≠ str√°nka</button>
  <button id="btnMyRuns">Moje bƒõhy</button>
  <button id="btnTeam">T√Ωm</button>
  <button id="btnAllRunners">V≈°ichni bƒõ≈æci</button>
  <button id="btnLogin">P≈ôihl√°sit se</button>
</nav>

<main>
  <section id="dashboard" class="active">
    <h2>V√≠tej v bƒõ≈æeck√© v√Ωzvƒõ Doln√≠ Lhoty!</h2>
    <p>Tady bude≈° sledovat sv√© v√Ωsledky a statistiky.</p>
  </section>

  <section id="myRuns">
    <h2>Zadat nov√Ω bƒõh</h2>
    <label for="input-km">Kolik km?</label>
    <input type="number" id="input-km" min="0" step="0.01" />
    <label for="input-min">ƒåas v minut√°ch</label>
    <input type="number" id="input-min" min="0" step="1" />
    <button id="btnAddRun">P≈ôidat bƒõh</button>
    <h3>Moje bƒõhy</h3>
    <ul id="myRunsList"></ul>
  </section>

  <section id="team">
    <h2>M≈Øj t√Ωm</h2>
    <p><b>T√Ωm:</b> <span id="currentTeamName">≈Ω√°dn√Ω t√Ωm</span></p>
    <select id="select-team"></select>
    <button id="btnJoinTeam">P≈ôidat se do t√Ωmu</button>
    <h3>ƒålenov√© t√Ωmu</h3>
    <ul id="teamMembersList"></ul>

    <h3>Vytvo≈ôit nov√Ω t√Ωm</h3>
    <input id="input-new-team" placeholder="N√°zev t√Ωmu" />
    <button id="btnCreateTeam">Vytvo≈ôit t√Ωm</button>
  </section>

  <section id="allRunners">
    <h2>Po≈ôad√≠ bƒõ≈æc≈Ø</h2>
    <table>
      <thead>
        <tr><th>#</th><th>Jm√©no</th><th>Km</th><th>Minuty</th><th>Tempo</th><th>T√Ωm</th></tr>
      </thead>
      <tbody id="runnersTableBody"></tbody>
    </table>
  </section>

  <section id="loginSection" style="display:none;">
    <h2>P≈ôihl√°≈°en√≠</h2>
    <label for="input-username">U≈æivatelsk√© jm√©no</label>
    <input type="text" id="input-username" />
    <label for="input-password">Heslo</label>
    <input type="password" id="input-password" />
    <button id="btnLoginSubmit">P≈ôihl√°sit se</button>
  </section>
</main>

<script>
  // Tmav√Ω re≈æim - naƒçten√≠ a ulo≈æen√≠ do localStorage
  const darkToggle = document.getElementById('darkModeToggle');
  const body = document.body;
  const storedDark = localStorage.getItem('darkMode');
  if(storedDark === 'true') {
    body.classList.add('dark');
    darkToggle.textContent = '‚òÄÔ∏è';
  }

  darkToggle.onclick = () => {
    body.classList.toggle('dark');
    if(body.classList.contains('dark')) {
      localStorage.setItem('darkMode', 'true');
      darkToggle.textContent = '‚òÄÔ∏è';
    } else {
      localStorage.setItem('darkMode', 'false');
      darkToggle.textContent = 'üåô';
    }
  }

  // Demo data a stav
  let loggedInUser = null;

  let runs = [
    { km: 10, min: 50, pace: 5 },
    { km: 5, min: 24, pace: 4.8 }
  ];
  let runners = {
    'pesakradek': { km: 270, min: 642 },
    '123456': { km: 57, min: 112 },
    'filip': { km: 50, min: 5 },
    'Radek': { km: 35, min: 180 },
    'martin': { km: 27, min: 82 },
    'kamila': { km: 20, min: 20 }
  };
  let teams = {
    'Brouci': ['pesakradek', 'kamila'],
    'Debilov√©': ['123456'],
    'Mago≈ôi': ['filip', 'Radek', 'martin']
  };
  let currentTeam = null;

  // Sekce
  const sections = {
    dashboard: document.getElementById('dashboard'),
    myRuns: document.getElementById('myRuns'),
    team: document.getElementById('team'),
    allRunners: document.getElementById('allRunners'),
    loginSection: document.getElementById('loginSection')
  };

  // Tlaƒç√≠tka menu
  document.getElementById('btnDashboard').onclick = () => showSection('dashboard');
  document.getElementById('btnMyRuns').onclick = () => {
    if(checkLoggedIn()) showSection('myRuns');
  };
  document.getElementById('btnTeam').onclick = () => {
    if(checkLoggedIn()) {
      showSection('team');
      renderTeamSelect();
      renderTeamMembers();
    }
  };
  document.getElementById('btnAllRunners').onclick = () => showSection('allRunners');
  document.getElementById('btnLogin').onclick = () => {
    if(loggedInUser) {
      logout();
    } else {
      showSection('loginSection');
    }
  };

  document.getElementById('logoutBtn').onclick = logout;

  // Zobrazit spr√°vnou sekci
  function showSection(name) {
    for (const sec in sections) {
      sections[sec].style.display = (sec === name) ? 'block' : 'none';
    }
    updateLoginButton();
  }

  // Zkontroluj p≈ôihl√°≈°en√≠
  function checkLoggedIn() {
    if(!loggedInUser) {
      alert('Pro vstup do t√©to sekce se mus√≠≈° p≈ôihl√°sit.');
      showSection('loginSection');
      return false;
    }
    return true;
  }

  // Aktualizuj text p≈ôihl√°≈°en√≠ / odhl√°≈°en√≠
  function updateLoginButton() {
    const btnLogin = document.getElementById('btnLogin');
    const btnLogout = document.getElementById('logoutBtn');
    if(loggedInUser) {
      btnLogin.textContent = 'Profil: ' + loggedInUser;
      btnLogout.style.display = 'inline-block';
      btnLogin.style.backgroundColor = '#2e5dbd';
      btnLogin.style.color = 'white';
    } else {
      btnLogin.textContent = 'P≈ôihl√°sit se';
      btnLogout.style.display = 'none';
      btnLogin.style.backgroundColor = '';
      btnLogin.style.color = '';
    }
  }

  // P≈ôihl√°≈°en√≠
  document.getElementById('btnLoginSubmit').onclick = () => {
    const username = document.getElementById('input-username').value.trim();
    const password = document.getElementById('input-password').value;
    if(username === '' || password === '') {
      alert('Vypl≈à u≈æivatelsk√© jm√©no a heslo.');
      return;
    }
    // Demo p≈ôihl√°≈°en√≠ - kdykoli
    loggedInUser = username;
    alert('P≈ôihl√°≈°en jako ' + username);
    showSection('dashboard');
    updateLoginButton();
  };

  // Odhl√°≈°en√≠
  function logout() {
    loggedInUser = null;
    alert('Odhl√°≈°en');
    showSection('dashboard');
    updateLoginButton();
  }

  // P≈ôid√°n√≠ bƒõhu
  document.getElementById('btnAddRun').onclick = () => {
    if(!checkLoggedIn()) return;

    const km = parseFloat(document.getElementById('input-km').value);
    const min = parseInt(document.getElementById('input-min').value);
    if (!km || !min || km <= 0 || min <= 0) {
      alert('Pros√≠m, zadej platn√© km i minuty.');
      return;
    }
    const pace = min / km;
    runs.push({ km, min, pace });

    // Aktualizuj tabulku m√Ωch bƒõh≈Ø
    renderMyRuns();

    // P≈ôidat i do seznamu bƒõ≈æc≈Ø pod u≈æivatele
    if (!runners[loggedInUser]) {
      runners[loggedInUser] = { km: 0, min: 0 };
    }
    runners[loggedInUser].km += km;
    runners[loggedInUser].min += min;

    renderRunnersTable();

    // Vyƒçisti formul√°≈ô
    document.getElementById('input-km').value = '';
    document.getElementById('input-min').value = '';
  };

  // Zobrazen√≠ m√Ωch bƒõh≈Ø
  function renderMyRuns() {
    const ul = document.getElementById('myRunsList');
    ul.innerHTML = '';
    runs.forEach((run, i) => {
      const li = document.createElement('li');
      li.textContent = `Bƒõh ${i + 1}: ${run.km.toFixed(2)} km, ${run.min} min, tempo ${run.pace.toFixed(2)} min/km`;
      ul.appendChild(li);
    });
  }

  // Zobrazen√≠ t√Ωmu
  function renderTeamSelect() {
    const select = document.getElementById('select-team');
    select.innerHTML = '<option value="">Vyber t√Ωm</option>';
    for (const teamName in teams) {
      const option = document.createElement('option');
      option.value = teamName;
      option.textContent = teamName;
      select.appendChild(option);
    }
  }

  document.getElementById('btnJoinTeam').onclick = () => {
    if(!checkLoggedIn()) return;

    const select = document.getElementById('select-team');
    const chosenTeam = select.value;
    if (!chosenTeam) return alert('Vyber t√Ωm.');

    // Odeber z ostatn√≠ch t√Ωm≈Ø
    for (const teamName in teams) {
      const idx = teams[teamName].indexOf(loggedInUser);
      if (idx !== -1 && teamName !== chosenTeam) {
        teams[teamName].splice(idx, 1);
      }
    }

    if (!teams[chosenTeam].includes(loggedInUser)) {
      teams[chosenTeam].push(loggedInUser);
    }

    currentTeam = chosenTeam;
    renderTeamMembers();
    alert(`P≈ôid√°n do t√Ωmu ${chosenTeam}`);
  };

  function renderTeamMembers() {
    const ul = document.getElementById('teamMembersList');
    ul.innerHTML = '';
    if (!currentTeam || !teams[currentTeam] || teams[currentTeam].length === 0) {
      ul.textContent = 'Nejsi zat√≠m v ≈æ√°dn√©m t√Ωmu.';
      return;
    }
    teams[currentTeam].forEach(member => {
      const li = document.createElement('li');
      li.textContent = member;
      ul.appendChild(li);
    });
  }

  document.getElementById('btnCreateTeam').onclick = () => {
    if(!checkLoggedIn()) return;

    const input = document.getElementById('input-new-team');
    const teamName = input.value.trim();
