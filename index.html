<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<title>Doln√≠ Lhota Run</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root {
    --primary: #2779e2;
    --accent: #ffac33;
    --bg: #f7fafc;
    --sidebar-bg: linear-gradient(90deg, #2779e2 0%, #48c3cb 50%, #1da1f2 100%);
    --card-bg: #fff;
    --text: #212529;
    --active-bg: #fff;
    --active-color: #2779e2;
    --inactive-color: #8b96ab;
  }
  [data-theme="dark"] {
    --primary: #8ab8fa;
    --accent: #ffa338;
    --bg: #181c24;
    --sidebar-bg: linear-gradient(90deg, #22243c 80%, #2779e2 150%);
    --card-bg: #24283b;
    --text: #f3f7fa;
    --active-bg: #fff;
    --active-color: #2779e2;
    --inactive-color: #607088;
  }
  body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', 'Montserrat', Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    transition: background .2s, color .2s;
  }
  #sidebar {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: 60px;
    background: var(--sidebar-bg);
    display: flex;
    align-items: center;
    padding: 0 20px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    z-index: 20;
    overflow-x: auto;
    scrollbar-width: none;
  }
  #sidebar::-webkit-scrollbar {
    display: none;
  }
  .sidebar-logo {
    flex: 0 0 auto;
    font-size: 1.4em;
    font-weight: 700;
    margin-right: 30px;
    color: #fff;
    white-space: nowrap;
  }
  .sidebar-btn {
    flex: 0 0 auto;
    margin: 0 8px;
    padding: 10px 20px;
    border-radius: 12px;
    font-size: 1em;
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    background: none;
    border: none;
    color: var(--inactive-color);
    transition: background-color 0.3s, color 0.3s;
  }
  .sidebar-btn.active {
    background: var(--active-bg);
    color: var(--active-color);
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(39, 121, 226, 0.4);
  }
  .sidebar-btn:hover:not(.active) {
    background: #fff3;
    color: var(--primary);
  }
  main {
    margin-top: 60px;
    padding: 20px;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
  .card {
    display: none;
  }
  .card.active {
    display: block;
  }
</style>
</head>
<body data-theme="light">
  <div id="sidebar">
    <div class="sidebar-logo">üèÉ Doln√≠ Lhota Run</div>
    <button class="sidebar-btn active" id="menu-hlavni" onclick="showSection('hlavni')">Hlavn√≠ str√°nka</button>
    <button class="sidebar-btn" id="menu-moje" onclick="showSection('moje')">Moje bƒõhy</button>
    <button class="sidebar-btn" id="menu-tym" onclick="showSection('tym')">T√Ωm</button>
    <button class="sidebar-btn" id="menu-vsichni" onclick="showSection('vsichni')">V≈°ichni bƒõ≈æci</button>
    <button class="sidebar-btn" id="logoutBtn" onclick="logout()" style="display:none;">Odhl√°sit</button>
    <button class="theme-switch" id="themeToggleBtn" onclick="switchTheme()">üåô Tmav√Ω re≈æim</button>
  </div>
  <main>
    <div class="card active" id="section-hlavni">
      <h1>V√≠tej v bƒõ≈æeck√© v√Ωzvƒõ Doln√≠ Lhoty!</h1>
      <p>Tady bude≈° sledovat sv√© v√Ωsledky a statistiky.</p>
    </div>
    <div class="card" id="section-moje">
      <h2>Zadat nov√Ω bƒõh</h2>
      <label for="input-km">Kilometry (km)</label>
      <input type="number" id="input-km" step="0.01" min="0" placeholder="nap≈ô. 5.3" oninput="updatePace()" />
      <label for="input-min">ƒåas (minuty)</label>
      <input type="number" id="input-min" step="1" min="1" placeholder="nap≈ô. 30" oninput="updatePace()" />
      <label for="input-pace">Pr≈Ømƒõrn√© tempo (min/km)</label>
      <input type="text" id="input-pace" disabled placeholder="0.00" />
      <button class="primary-btn" onclick="addRun()">P≈ôidat bƒõh</button>

      <h3>Seznam bƒõh≈Ø</h3>
      <ul id="myRunsList" class="run-list"></ul>
    </div>

    <div class="card" id="section-tym">
      <h2>T√Ωmy</h2>
      <label for="select-team">Vyber t√Ωm</label>
      <select id="select-team"></select>
      <button class="primary-btn" onclick="joinTeam()">P≈ôidat se do t√Ωmu</button>
      <h3>ƒålenov√© t√Ωmu</h3>
      <ul id="teamMembersList" class="run-list"></ul>
      <label for="input-new-team">Vytvo≈ôit nov√Ω t√Ωm</label>
      <input type="text" id="input-new-team" placeholder="N√°zev t√Ωmu" />
      <button class="primary-btn" onclick="createTeam()">Vytvo≈ôit t√Ωm</button>
    </div>

    <div class="card" id="section-vsichni">
      <h2>Tabulka bƒõ≈æc≈Ø</h2>
      <table>
        <thead>
          <tr>
            <th>#</th><th>Jm√©no</th><th>Celkem km</th><th>Celkem min</th><th>Pr≈Ømƒõrn√© tempo</th><th>T√Ωm</th>
          </tr>
        </thead>
        <tbody id="runnersTableBody"></tbody>
      </table>
    </div>
  </main>

<script>
  let runs = [];
  let runners = {
    'Alena': { km: 15, min: 90 },
    'Karel': { km: 20, min: 100 }
  };
  let teams = {
    'Brouci': ['Alena'],
    'Lesn√≠ bƒõ≈æci': ['Karel']
  };
  let currentTeam = null;

  function showSection(id) {
    document.querySelectorAll('.card').forEach(e => e.classList.remove('active'));
    document.querySelectorAll('.sidebar-btn').forEach(e => e.classList.remove('active'));
    document.getElementById('section-' + id).classList.add('active');
    document.getElementById('menu-' + id).classList.add('active');

    if (id === 'moje') renderMyRuns();
    if (id === 'tym') {
      renderTeamSelect();
      renderTeamMembers();
    }
    if (id === 'vsichni') renderRunnersTable();
  }

  function updatePace() {
    const km = parseFloat(document.getElementById('input-km').value);
    const min = parseInt(document.getElementById('input-min').value);
    if (km > 0 && min > 0) {
      document.getElementById('input-pace').value = (min / km).toFixed(2);
    } else {
      document.getElementById('input-pace').value = '';
    }
  }

  function addRun() {
    const km = parseFloat(document.getElementById('input-km').value);
    const min = parseInt(document.getElementById('input-min').value);
    if (!km || !min || km <= 0 || min <= 0) {
      alert('Pros√≠m, zadej platn√© km i minuty.');
      return;
    }
    const pace = min / km;
    runs.push({ km, min, pace });

    renderMyRuns();

    if (!runners['Ty']) {
      runners['Ty'] = { km: 0, min: 0 };
    }
    runners['Ty'].km += km;
    runners['Ty'].min += min;

    renderRunnersTable();

    document.getElementById('input-km').value = '';
    document.getElementById('input-min').value = '';
    document.getElementById('input-pace').value = '';
  }

  function renderMyRuns() {
    const ul = document.getElementById('myRunsList');
    ul.innerHTML = '';
    runs.forEach((run, i) => {
      const li = document.createElement('li');
      li.textContent = `${i + 1}. ${run.km.toFixed(2)} km, ${run.min} min, tempo ${run.pace.toFixed(2)} min/km`;
      ul.appendChild(li);
    });
  }

  function renderTeamSelect() {
    const select = document.getElementById('select-team');
    select.innerHTML = '';
    for (const teamName in teams) {
      const option = document.createElement('option');
      option.value = teamName;
      option.textContent = teamName;
      select.appendChild(option);
    }
  }

  function joinTeam() {
    const select = document.getElementById('select-team');
    const chosenTeam = select.value;
    if (!chosenTeam) return alert('Vyber t√Ωm.');

    for (const teamName in teams) {
      const idx = teams[teamName].indexOf('Ty');
      if (idx !== -1 && teamName !== chosenTeam) {
        teams[teamName].splice(idx, 1);
      }
    }

    if (!teams[chosenTeam].includes('Ty')) {
      teams[chosenTeam].push('Ty');
    }

    currentTeam = chosenTeam;
    renderTeamMembers();
    alert(`P≈ôid√°n do t√Ωmu ${chosenTeam}`);
  }

  function renderTeamMembers() {
    const ul = document.getElementById('teamMembersList');
    ul.innerHTML = '';
    if (!currentTeam || !teams[currentTeam] || teams[currentTeam].length === 0) {
      ul.textContent = 'Nejsi zat√≠m v ≈æ√°dn√©m t√Ωmu.';
      return;
    }
    teams[currentTeam].forEach(member => {
      const li = document.createElement('li');
      li.textContent = member;
      ul.appendChild(li);
    });
  }

  function createTeam() {
    const input = document.getElementById('input-new-team');
    const teamName = input.value.trim();
    if (!teamName) {
      alert('Zadej n√°zev t√Ωmu.');
      return;
    }
    if (teams[teamName]) {
      alert('T√Ωm s t√≠mto n√°zvem u≈æ existuje.');
      return;
    }
    teams[teamName] = [];
    input.value = '';
    alert(`T√Ωm "${teamName}" byl vytvo≈ôen.`);
    renderTeamSelect();
  }

  function renderRunnersTable() {
    const tbody = document.getElementById('runnersTableBody');
    tbody.innerHTML = '';
    const sorted = Object.entries(runners).sort((a,b) => b[1].km - a[1].km);
    sorted.forEach(([name, stats], index) => {
      let teamName = '-';
      for (const tName in teams) {
        if (teams[tName].includes(name)) {
          teamName = tName;
          break;
        }
      }
      const pace = (stats.min / stats.km).toFixed(2);
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${index + 1}</td>
        <td>${name}</td>
        <td>${stats.km.toFixed(2)}</td>
        <td>${stats.min}</td>
        <td>${pace}</td>
        <td>${teamName}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  function logout() {
    alert('Odhl√°≈°en (demo).');
  }

  showSection('hlavni');
</script>
<!-- P≈ôidej do <main> pod p≈ôedchoz√≠ sekce -->
<div class="card" id="section-login">
  <h2>P≈ôihl√°≈°en√≠</h2>
  <label for="login-email">Email</label>
  <input type="email" id="login-email" placeholder="email@example.com" />
  <label for="login-password">Heslo</label>
  <input type="password" id="login-password" placeholder="heslo" />
  <button class="primary-btn" onclick="login()">P≈ôihl√°sit</button>
  <p>Nem√°≈° √∫ƒçet? <a href="#" onclick="showSection('register')">Zaregistruj se</a></p>
</div>

<div class="card" id="section-register">
  <h2>Registrace</h2>
  <label for="reg-email">Email</label>
  <input type="email" id="reg-email" placeholder="email@example.com" />
  <label for="reg-password">Heslo</label>
  <input type="password" id="reg-password" placeholder="heslo" />
  <button class="primary-btn" onclick="register()">Registrovat</button>
  <p>Ji≈æ m√°≈° √∫ƒçet? <a href="#" onclick="showSection('login')">P≈ôihla≈° se</a></p>
</div>

<script>
let loggedIn = false;
let currentUserEmail = '';

function login() {
  const email = document.getElementById('login-email').value.trim();
  const password = document.getElementById('login-password').value.trim();

  if (!email || !password) {
    alert('Vypl≈à email i heslo');
    return;
  }
  loggedIn = true;
  currentUserEmail = email;
  alert(`P≈ôihl√°≈°en: ${email}`);
  showSection('hlavni');
  updateSidebarLoginState();
}

function register() {
  const email = document.getElementById('reg-email').value.trim();
  const password = document.getElementById('reg-password').value.trim();

  if (!email || !password) {
    alert('Vypl≈à email i heslo');
    return;
  }
  alert(`√öƒçet vytvo≈ôen pro: ${email}. M≈Ø≈æe≈° se p≈ôihl√°sit.`);
  showSection('login');
}

function logout() {
  loggedIn = false;
  currentUserEmail = '';
  alert('Odhl√°≈°en');
  showSection('login');
  updateSidebarLoginState();
}

function updateSidebarLoginState() {
  const logoutBtn = document.getElementById('logoutBtn');
  if (loggedIn) {
    logoutBtn.style.display = 'flex';
  } else {
    logoutBtn.style.display = 'none';
  }
}

function switchTheme() {
  const html = document.documentElement;
  const isDark = html.getAttribute('data-theme') === 'dark';
  if (isDark) {
    html.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
    document.getElementById('themeToggleBtn').textContent = 'üåô Tmav√Ω re≈æim';
  } else {
    html.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
    document.getElementById('themeToggleBtn').textContent = '‚òÄÔ∏è Svƒõtl√Ω re≈æim';
  }
}

window.onload = () => {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', savedTheme);
  document.getElementById('themeToggleBtn').textContent = savedTheme === 'dark' ? '‚òÄÔ∏è Svƒõtl√Ω re≈æim' : 'üåô Tmav√Ω re≈æim';

  if (!loggedIn) {
    showSection('login');
  } else {
    showSection('hlavni');
  }
  updateSidebarLoginState();
};
</script>
<!-- P≈ôidej do <main> -->
<div class="card" id="section-login">
  <h2>P≈ôihl√°≈°en√≠</h2>
  <label for="login-email">Email</label>
  <input type="email" id="login-email" placeholder="email@example.com" />
  <label for="login-password">Heslo</label>
  <input type="password" id="login-password" placeholder="heslo" />
  <button class="primary-btn" onclick="login()">P≈ôihl√°sit</button>
  <p>Nem√°≈° √∫ƒçet? <a href="#" onclick="showSection('register')">Zaregistruj se</a></p>
</div>

<div class="card" id="section-register">
  <h2>Registrace</h2>
  <label for="reg-email">Email</label>
  <input type="email" id="reg-email" placeholder="email@example.com" />
  <label for="reg-password">Heslo</label>
  <input type="password" id="reg-password" placeholder="heslo" />
  <button class="primary-btn" onclick="register()">Registrovat</button>
  <p>Ji≈æ m√°≈° √∫ƒçet? <a href="#" onclick="showSection('login')">P≈ôihla≈° se</a></p>
</div>

<script>
let loggedIn = false;
let currentUserEmail = '';

function login() {
  const email = document.getElementById('login-email').value.trim();
  const password = document.getElementById('login-password').value.trim();

  if (!email || !password) {
    alert('Vypl≈à email i heslo');
    return;
  }
  loggedIn = true;
  currentUserEmail = email;
  alert(`P≈ôihl√°≈°en: ${email}`);
  showSection('hlavni');
  updateSidebarLoginState();
}

function register() {
  const email = document.getElementById('reg-email').value.trim();
  const password = document.getElementById('reg-password').value.trim();

  if (!email || !password) {
    alert('Vypl≈à email i heslo');
    return;
  }
  alert(`√öƒçet vytvo≈ôen pro: ${email}. M≈Ø≈æe≈° se p≈ôihl√°sit.`);
  showSection('login');
}

function logout() {
  loggedIn = false;
  currentUserEmail = '';
  alert('Odhl√°≈°en');
  showSection('login');
  updateSidebarLoginState();
}

function updateSidebarLoginState() {
  const logoutBtn = document.getElementById('logoutBtn');
  if (loggedIn) {
    logoutBtn.style.display = 'flex';
  } else {
    logoutBtn.style.display = 'none';
  }
}

function switchTheme() {
  const html = document.documentElement;
  const isDark = html.getAttribute('data-theme') === 'dark';
  if (isDark) {
    html.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
    document.getElementById('themeToggleBtn').textContent = 'üåô Tmav√Ω re≈æim';
  } else {
    html.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
    document.getElementById('themeToggleBtn').textContent = '‚òÄÔ∏è Svƒõtl√Ω re≈æim';
  }
}

window.onload = () => {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', savedTheme);
  document.getElementById('themeToggleBtn').textContent = savedTheme === 'dark' ? '‚òÄÔ∏è Svƒõtl√Ω re≈æim' : 'üåô Tmav√Ω re≈æim';

  if (!loggedIn) {
    showSection('login');
  } else {
    showSection('hlavni');
  }
  updateSidebarLoginState();
};
</script>
